<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" href="css/public.css">
	<link rel="stylesheet" href="css/iconfont.css"/>
	<link rel="stylesheet" href="css/onshop2.css"/>


</head>
<body>
	<header>
		<div class="headern">
		<img src="img/1.jpg" alt="一加" class="headerimg" />
		<ul class="headerul">
			<li><a href="#">OnePlus 6T <span id="tnew">New</span></a></li>
			<li><a href="#">OnePlus 6</a></li>
			<li><a href="onshop2.html">商城</a></li>
			<li><a href="#">品牌</a></li>
			<li><a href="#">服务</a></li>
			<li><a href="#">论坛</a></li>
		</ul>
		<div class="headeryou">
			<div class="headeryoum">
				<span class="headeryoumaaa"><i class="iconfont icon-lianxiren"></i></span>
				<div class ="headerhy">
				  <a href="#">订单</a>
				  <a href="#">账户</a>
				   <a href="#">推荐有礼</a>
				   <a href="login.html" id="denglv">登录</a>
          <span id="yonghu"></span><a id="tuichu">退出</a>
			   </div>
			</div>
			<div class="headeryoum deaderyoumm">
				<span class="headeryouaasapn">
				<i class="iconfont icon-caigou-xianxing"></i></span>
			  <div id ="headerhyy">
				     <a href="#" id="headermmd">您的购物车里没有商品</a>
			  	 <div id="shangpin">
				   <!--    <a class="shang">
				      	   <span class="shangspan"></span>
				      	   <p class="shangps">
                    <span class="shangps1">	OnuPlus 6 亮瓷黑 8G+128G</span><br/>
				      	   	<span class="shangpxdj" id="nmamp">
                      <span>￥</span><span>2999.00</span>
                   </span>
                  <span class="shangpxy">
                       <button class="jian">-</button> 
                      <span class="shuzz">1</span>
                     <button class="jia">+</button>
                  </span> 
				      	   </p>
                  <a class="delet">删除</a>
				      </a> -->
			  	 </div>
             <p id ="zongjia">总价: ￥ <span id="zzong">100</span> RMB
                <p id="jiesuan">去结算</p>
              </p>
				    <a href="#" id="hedmmmpp">去购物</a>
			   </div>
			</div>
			<div class="headeryoum">
			<span class="headeryoumaaa"><i class="iconfont icon-sousuo1"></i></span>
			</div>
		</div>
	</div>
	</header>
      <div id="zboxsw">
      	<ul class="shouul">
      		<a href="#" class="shouli"><span class="shouy" id="shouy1"></span> <p class="shouz">手机</p></a>
      		<a href="#" class="shouli"><span class="shouy" id="shouy2"></span> <p class="shouz">耳机</p></a>
      		<a href="#" class="shouli"><span class="shouy" id="shouy3"></span> <p class="shouz">壳/膜</p></a>
      		<a href="#" class="shouli"><span class="shouy" id="shouy4"></span> <p class="shouz">适配器/数据线</p></a>
      		<a href="#" class="shouli"><span class="shouy" id="shouy5"></span> <p class="shouz">套装</p></a>
      		<a href="#" class="shouli"><span class="shouy" id="shouy6"></span> <p class="shouz">生活馆</p></a>
      	</ul>
      </div>
     <div id="jutuw"><a href="#" id="jutu"></a></div> 
     <div class="zbox1">
     	 <a href="one6quan.html" class="zbox1s"></a>
     	 <a href="one6quan.html" class="zbox1s"></a>
     	 <a href="one6quan.html" class="zbox1s"></a>
     </div>
     <div class="dzboxw">
     	<div class="dzboxn">
     	     <h2 class="h2">OnePlus 6T热销配件</h2>
     	     <div class="rexiao1">
             <div class="rexiao1sw">
     	     	    <a href="#" class="rexiao1s">
                  <img src="img/hong1.png" alt="" class="rexiao1ss" id="rexiao1ss1">
                 <p class="rexiao1sp">OnePlus 6T 悦耳套餐</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>299.00 </span>|<span class="shanchu">  ￥345.00</span> </p>
     	         	</a>
              <button class="jiaru">加入购物车</button>
                </div>
                <div class="rexiao1sw">
     	     	<a href="#" class="rexiao1s">
                  <img src="img/hongqian.png" alt="" class="rexiao1ss" id="rexiao1ss2">
                 <p class="rexiao1sp">一加银耳2T</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>119.00</span> </p>
                 <span class="seban" id="seban1"></span>
     	     	</a>
                 <button class="jiaru">加入购物车</button>
              </div>
              <div class="rexiao1sw">
     	     	<a href="#" class="rexiao1s">
              <!-- <span class="rexiao1ss" id="rexiao1ss3"></span> -->
                  <img src="img/hong.png" alt="" class="rexiao1ss" id="rexiao1ss3">

                 <p class="rexiao1sp">OnePlus 6T硅胶保护壳</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>129.00</span> </p>
                 <span class="seban" id="seban2"></span>
     	     	</a>
                 <button class="jiaru">加入购物车</button>
              </div>

              <div class="rexiao1sw">
     	     		<a href="#" class="rexiao1s">
                <!-- <span class="rexiao1ss" id="rexiao1ss4"></span> -->
                  <img src="img/hong2.png" alt="" class="rexiao1ss" id="rexiao1ss4">

                 <p class="rexiao1sp">OnePlus 6T全包保护壳</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>149.00</span> </p>
                 <span class="seban2w">
                 <span class="seban2" id="seban3"></span>
                 <span class="seban2" id="seban4"></span>
                 <span class="seban2" id="seban5"></span>
                 </span>
     	     	</a>
                 <button class="jiaru">加入购物车</button>
              </div>
     	     </div>
     	     <h2 class="h2">OnePlus 6热销配件</h2>
     	     <div class="rexiao1">


             <div class="rexiao1sw">
     	     	<a href="#" class="rexiao1s">
              <!-- <span class="rexiao1ss" id="rexiao2ss1"></span> -->
                  <img src="img/shang21.png" alt="" class="rexiao1ss" id="rexiao2ss1">

                 <p class="rexiao1sp">OnePlus 6 3D钢化玻璃保护膜</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>129.00</span> </p>
                   <span class="seban" id="seban1"></span>
     	     	</a>
                    <button class="jiaru">加入购物车</button>
              </div>
                 <div class="rexiao1sw">
     	     	<a href="#" class="rexiao1s">
              <!-- <span class="rexiao1ss" id="rexiao2ss2"></span> -->
                  <img src="img/shang22.png" alt="" class="rexiao1ss" id="rexiao2ss2">

                 <p class="rexiao1sp">OnePlus 6 个性保护壳</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>99.00</span> </p>
                  <span class="seban2w2">
                    <span class="seban2" id="seban3"></span>
                    <span class="seban2" id="seban41"></span>
                 </span>
     	     	</a>
                     <button class="jiaru">加入购物车</button>
              </div>
                <div class="rexiao1sw">
     	     	<a href="#" class="rexiao1s">
              <!-- <span class="rexiao1ss" id="rexiao2ss3"></span> -->
                  <img src="img/shang23.png" alt="" class="rexiao1ss" id="rexiao2ss3">
                 <p class="rexiao1sp">OnePlus 6全包保护壳</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>149.00</span> </p>
                <span class="seban2w">
                 <span class="seban2" id="seban3"></span>
                 <span class="seban2" id="seban4"></span>
                 <span class="seban2" id="seban5"></span>
                 </span>
     	     	</a>
                  <button class="jiaru">加入购物车</button>
              </div>
                <div class="rexiao1sw">
     	     		<a href="#" class="rexiao1s">
                <!-- <span class="rexiao1ss" id="rexiao2ss4"></span> -->
                  <img src="img/shang24.png" alt="" class="rexiao1ss" id="rexiao2ss4">

                 <p class="rexiao1sp">一加云耳</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>399.00</span> </p>
               <span class="seban2w2">
                    <span class="seban2" id="seban3"></span>
                    <span class="seban2" id="seban42"></span>
                </span>
     	     	</a>
                    <button class="jiaru">加入购物车</button>
              </div>
     	     </div>
     	     <h2 class="h2">一加生活周边</h2>
                <div class="rexiao1">
                     <div class="rexiao1sw">
     	     	<a href="#" class="rexiao1s">
              <!-- <span class="rexiao1ss" id="rexiao3ss1"></span> -->
                  <img src="img/bao1.png" alt="" class="rexiao1ss" id="rexiao3ss1">

                 <p class="rexiao1sp">一加 Explorer双肩包</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>499.00</span></p>
                   <span class="seban2w2">
                    <span class="seban2" id="seban311"></span>
                    <span class="seban2" id="seban312"></span>
                 </span>
     	     	</a>
                   <button class="jiaru">加入购物车</button>
              </div>
                  <div class="rexiao1sw">
     	     	<a href="#" class="rexiao1s">
              <!-- <span class="rexiao1ss" id="rexiao3ss2"></span> -->
                  <img src="img/bao2.png" alt="" class="rexiao1ss" id="rexiao3ss2">

                 <p class="rexiao1sp">一加旅行双肩包</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>399.00</span></p>
                  <span class="seban2w2">
                    <span class="seban2" id="seban321"></span>
                    <span class="seban2" id="seban322"></span>
                 </span>
     	     	</a>
                    <button class="jiaru">加入购物车</button>
              </div>
               <div class="rexiao1sw">
     	     	<a href="#" class="rexiao1s">
              <!-- <span class="rexiao1ss" id="rexiao3ss3"></span> -->
                  <img src="img/bao3.png" alt="" class="rexiao1ss" id="rexiao3ss3">

                 <p class="rexiao1sp">一加真皮钱包</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>249.00</span> </p>
              
     	     	</a>
                  <button class="jiaru">加入购物车</button>
              </div>
                <div class="rexiao1sw">
     	     		   <a href="#" class="rexiao1s">
                  <!-- <span class="rexiao1ss" id="rexiao3ss4"></span> -->
                  <img src="img/bao4.png" alt="" class="rexiao1ss" id="rexiao3ss4">

                 <p class="rexiao1sp">一加旅行袋</p>
                 <p class="rexiao1sp rexiao1s2">￥<span>299.00</span> </p>
     	         	</a>
                  <button class="jiaru">加入购物车</button>
              </div>
     	     </div>
     	 </div>
     </div>
          <div class="shouhouw">
	  <ul id="shouhou">
		 <li>  
		 	<a href="#" class="shouhoua" id="shouhoua1"></a>
		 	<p class="shouhoup">7天无理由退货</p>
		 </li>
		  <li>  
		 	<a href="#" class="shouhoua" id="shouhoua2"></a>
		 	<p class="shouhoup">15天退货保障</p>
		 </li>
		  <li>  
		 	<a href="#" class="shouhoua" id="shouhoua3"></a>
		 	<p class="shouhoup">30天换货保障</p>
		 </li>
		  <li>  
		 	<a href="#" class="shouhoua" id="shouhoua4"></a>
		 	<p class="shouhoup">99元全场包邮</p>
		 </li>
	</ul>
</div>
		 <div id="hou">
  	<div class="houn">
  	    
  	    	 <ul class="hous" id="hous1">
  	    	 	<li>一加产品</li>
  	    	 	<li><a href="">OnePlus 6T</a></li>
  	    	 	<li><a href="">OnePlus 6</a></li>
  	    	 	<li><a href="">OnePlus 5T</a></li>
  	    	 	<li><a href="">OnePlus 5</a></li>
  	    	 </ul>
  	        <ul class="hous" id="hous2">
  	    	 	<li>热门活动</li>
  	    	 	<li><a href="">推荐有礼</a></li>
  	    	 	<li><a href="">依旧换新</a></li>
  	    	 	<li><a href="">Shot on OnePlus</a></li>
  	    	 </ul>
  	    
  	     <ul class="hous" id="hous3">
  	    	 	<li>关于一加</li>
  	    	 	<li><a href="">了解一加</a></li>
  	    	 	<li><a href="">加入一加</a></li>
  	    	 	<li><a href="">H2OS</a></li>
  	    	 	<li><a href="">云服务</a></li>
  	    	 	<li><a href="">预置应用公示</a></li>
  	    	 </ul>
  	    	   <ul class="hous" id="hous4">
  	    	 	<li>服务支持</li>
  	    	 	<li><a href="">购买帮助</a></li>
  	    	 	<li><a href="">用户手册</a></li>
  	    	 	<li><a href="">寄修服务</a></li>
  	    	 	<li><a href="">服务中心</a></li>
  	    	 	<li><a href="">联系我们</a></li>
  	    	 </ul>
  	        <div class="hous" id="hous5">
  	        	 <img src="img/dianhua.jpg" alt="" id="dianhuahaoma"/>
  	        	 <span id="kefuwai">
  	        	 	<span id="kefuhou"></span>
  	        	 	<a href="#" id="zaixiankefu">在线客服</a>
  	        	 </span>
  	        	 <li id="shij">周一至周日 9:00 - 22:00</li>
  	        	 <div id="WeChat">
  	        	 	 <img id="WeChatx" src="img/erweima.png" alt=""/>
  	        	 </div>
  	              <a href="#" id="weib"></a>
  	        </div>
  	       </div>
    </div>
    <div class="chinaw">
    	<div class="chinan">
    	  <div class="china">
    	   <span id="guoqi"></span>
    	   	<a href="#" id="china2">中国( 简体中文/CNY )</a>
    	   	<a href="#" class="yinsi">隐私政策</a>
    	   	<a href="#" class="xieyi">用户协议</a>
    	   	<a href="#" class="anquan">安全问题反馈</a>
    	  </div>
    	 </div>
    </div>
    <footer>
    	<div class="fxian">
    	 <div class="fshang">
    	 	<p class="fshang1">© 2013-2018 OnePlus. All Rights Reserved. (粤ICP备13080605号-4)</p>
    	 	<a href="#" class="yingye"></a>
    	 	<a href="#" class="kexin"></a>
    	 </div>
    	 <div class="fxia">
    	 			 <a href="#" class="fxiaw"><span class="fxiaz"></span>
    	 	     	<p class="gongan">粤公网安备 44030402001407号</p></a>
    	   </div>
    	 </div>
    	 
    </footer>
</body>
</html>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/cookieTools.js"></script>
<script type="text/javascript" src="js/public.js"></script>
<script type="text/javascript">
 
    window.onload=function(){
           geet();
          getgouwu();
    }
  $(document).scroll(function(){
  	 if($(document).scrollTop()==0){
  	 	$(".shouy").show("1000");
       $("#zboxsw").css({boxShadow:"none",
       	          position:" relative",
            
         });
  	 }else{
  	 $(".shouy").hide("1000");
       $("#zboxsw").css({boxShadow:" 0px 5px  10px  #999999", 
       	          position:" fixed",
       	           top:"0px"
            })
  	 }
  
  });
      $(".jiaru").each(function(i){
      $(".jiaru").eq(i).click(function(){
          let obj={
              "name":$(this).parent().children(0).children(1)[1].innerHTML,
              "danjia":parseFloat($(this).parent().children(0).children(1)[2].firstElementChild.innerHTML),
              "shuliang":1,
              "img":$(this).parent().children(0)[0].firstElementChild.src
          }
           let str=JSON.stringify(obj);
            // console.log(str);

            let ajx = new XMLHttpRequest();
            ajx.open("get","php/gouwu.php?obj="+str,"true");
            ajx.onreadystatechange=function(){ 
               if(ajx.readyState==4&&ajx.status==200){
                    console.log(ajx.responseText);
                    getgouwu(ajx.responseText);
               }
            }
            ajx.send();
       })
   });
    
   

       function geet(){
                 console.log("mmp");

         let str=getCookie("username");
         if(str!=null){
             // $("#yonghu").innerHTML="用户："+str;
             $("#yonghu").html("用户："+str);
           // $("#denglv").style.display="none";
             $("#denglv").css("display",'none');
           // $("#yonghu").style.display="block";
             $("#yonghu").css("display","block");
           // $("#tuichu").style.display="block";
             $("#tuichu").css("display","block");
          

         }else if(str==null){
           // $("#denglv").style.display="block";
             $("#denglv").css("display","block");
           // $("#yonghu").style.display="none";
             $("#yonghu").css("display","none");
           // $("#tuichu").style.display="none";
             $("#tuichu").css("display","none");
         }
      
        }



       $("#tuichu").click(function(){
                 console.log("mmp");
          if(confirm("确定退出当前账号吗")){
                addCookie("username","?",-1);
              
                 $("#denglv").css("display",'block');
                 $("#yonghu").css("display","none");
                  $("#tuichu").css("display","none");
              geet();
          }
              
             });
        



   function getgouwu(){
          console.log("onload");

        let ajx=new XMLHttpRequest();
        ajx.open("get","php/getgouwu.php",true)
        ajx.onreadystatechange=function(){
           if(ajx.readyState==4&&ajx.status==200){
            showd(ajx.responseText);
           }
        }
        ajx.send();
   }




    function showd(ojb){
         if(ojb==null){
          $("#headermmd").css("display","block");
           $("#shangpin").css("display","none");
           $("#zongjia").css("display","none");
         } else{

           $("#headermmd").css("display","none");
           $("#shangpin").css("display","block");
           $("#zongjia").css("display","block");
           
             $("#shangpin").empty();
          
         let obj=JSON.parse(ojb);
          // console.log(obj[0]["name"]);
          let jiaq=0;
        for(let i in obj){
             let shanga= document.createElement("a");
               shanga.className="shang";
             let shangss=document.createElement("img");
              shangss.className="shangspan";
              // console.log(obj[i]['img']);
              shangss.src=obj[i]['img'];
             shanga.append(shangss); 
             let shangp=document.createElement("p");
             shangp.className="shangps";
             shanga.append(shangp);
             let shangps1=document.createElement("span");
             shangps1.className="shangps1";
             shangps1.innerHTML=obj[i]["name"]+"<br/>";
             shangp.append(shangps1);
             // shangp.append(<br/>);
             let shangg=document.createElement("span");
             shangg.className="shangg";
             shangg.innerHTML=" ￥ ";
             shangp.append(shangg);
             let shangps2=document.createElement("span");
             shangps2.className="shangpxdj";
             shangps2.innerHTML=obj[i]["danjia"];
             shangp.append(shangps2);
             let shangps3=document.createElement("span");
                shangps3.className="shangpxy";
               shangp.append(shangps3);
            let shangps31=document.createElement("button");
                shangps31.className="jian";
                shangps31.innerHTML="-";
              shangps3.append(shangps31);
              let shangps32=document.createElement('span');
              shangps32.className="shuzz";
              shangps32.innerHTML=obj[i]['shuliang'];
              shangps3.append(shangps32);
              let shangps33=document.createElement("button");
              shangps33.className="jia";
                shangps33.innerHTML="+";
                 shangps3.append(shangps33);
             $("#shangpin").append(shanga);
                   // console.log($("#shangpin").offsetHeight);
          // if($("#shangpin").css("height")>=300){
              $("#shangpin").css("height","300px");
          // }

            jiaq+=parseInt(obj[i]["danjia"]*obj[i]['shuliang']);
         }
          $("#zzong").html(jiaq);
         
        } 
      
          $(".jia").each(function(){
             $(this).click(()=>{
               // console.log($(this));
               let num= $(this).prev().text();
                    num++;
                $(this).prev().text(num);
           zongjiaa();
               
             })
          });
        $(".jian").each(function(){
              $(this).click(()=>{
                      let num=$(this).next().text();
                        num--;
                   if(num<=0){
                        num=0;
                      if(confirm("是否删除改商品")){
                         let yaoshan=$(this).parent().parent().parent();
                         let ming=$(this).parent().prev().prev().prev().text();

                         // console.log(ming);

                          // shanccc(yaoshan,ming);
                                 let ajx= new XMLHttpRequest();
                         ajx.open("get","php/shanchu.php?name="+ming,true);
                          ajx.onreadystatechange=function(){
                              if(ajx.readyState==4 && ajx.status==200){
                                // console.log(ajx.responseText);
                                    // yaoshan.hide();
                                    yaoshan.remove();
                                    // shanc(ajx.responseText);
                              }
                             }
                            ajx.send();
                      
                      }
                   }
                   $(this).next().text(num);
                   zongjiaa();
              })
        })
     }






     
     function zongjiaa(){
      let zong=0;
         $(".shangpxdj").each(function(){
             let danjia=$(this).text();
             let shuliang=parseInt($(this).next().children().eq(1).text());
             zong+=danjia*shuliang;
         })
         $("#zzong").html(zong);
     }
    

 
  
</script>